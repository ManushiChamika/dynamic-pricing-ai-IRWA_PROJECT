<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FluxPricer Chat</title>
  <link rel="stylesheet" href="/ui/styles.css" />
</head>
<body>
  <div id="app" class="app">
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h2>Threads</h2>
         <button id="newThreadBtn" title="New Thread" aria-label="New Thread">Ôºã</button>
         <button id="collapseSidebar" title="Collapse" aria-label="Collapse sidebar">‚Æú</button>
      </div>
      <ul id="threadsList" class="threads"></ul>
      <div class="import-export">
        <button id="exportBtn">Export</button>
        <label class="import-label">Import <input type="file" id="importFile" accept="application/json" hidden /></label>
      </div>
    </aside>
    <main class="main">
      <header class="topbar">
         <div class="title" id="threadTitle" title="Double-click to rename">Select or create a thread</div>
         <button id="renameThreadBtn" class="edit-title" title="Rename thread" aria-label="Rename thread">‚úé</button>
         <button id="deleteThreadBtn" class="edit-title" title="Delete thread" aria-label="Delete thread">üóë</button>
         <div class="spacer"></div>
         <button id="themeToggle" title="Toggle theme" aria-label="Toggle theme">üåì</button>
         <a class="settings-link" href="#" id="settingsBtn" title="Settings" aria-label="Open settings">‚öôÔ∏è</a>
         <button id="authBtn" class="topbar-btn" title="Login or account" aria-label="Login or account">Login</button>
       </header>
       <section class="messages" id="messages"></section>
       <div class="toast-container" id="toasts" role="status" aria-live="polite" aria-atomic="true"></div>
      <footer class="composer">
        <input id="userName" placeholder="Your name" value="user" />
        <textarea id="input" rows="2" placeholder="Type a message..."></textarea>
        <div class="actions">
          <label><input type="checkbox" id="streaming" checked /> Stream</label>
          <label><input type="checkbox" id="showThinking" /> Show thinking</label>
          <button id="send">Send</button>
          <button id="stopBtn" class="hidden" aria-label="Stop streaming">Stop</button>
        </div>
      </footer>
    </main>
  </div>

  <div id="settingsPanel" class="settings-panel hidden">
    <div class="settings-content">
      <div class="settings-header">
        <h3>Settings</h3>
        <button id="closeSettings" title="Close">‚úï</button>
      </div>
      <div class="settings-body">
        <label><input type="checkbox" id="optShowModel" /> Show model tag</label>
        <label><input type="checkbox" id="optShowTimestamps" /> Show timestamps</label>
        <label><input type="checkbox" id="optShowMeta" /> Show info icon</label>
        <label><input type="checkbox" id="optShowThinking" /> Show "Thinking‚Ä¶" events</label>
        <label>Mode
          <select id="optMode">
            <option value="user">User</option>
            <option value="developer">Developer</option>
          </select>
        </label>
        <label>Streaming
          <select id="optStreaming">
            <option value="sse">SSE</option>
            <option value="ws" disabled>WebSocket (coming soon)</option>
          </select>
        </label>
      </div>
      <div class="settings-footer">
        <small>Note: Changing mode and server-side thinking requires login to persist.</small>
      </div>
    </div>
  </div>
 
   <div id="authPanel" class="settings-panel hidden">
     <div class="settings-content">
       <div class="settings-header">
         <h3>Account</h3>
         <button id="closeAuth" title="Close">‚úï</button>
       </div>
       <div class="settings-body">
         <div id="authLoggedOut">
           <label>Email <input type="email" id="authEmail" /></label>
           <label>Password <input type="password" id="authPassword" /></label>
           <div style="display:flex; gap:8px;">
             <button id="loginBtn">Login</button>
             <button id="registerBtn">Register</button>
           </div>
         </div>
         <div id="authLoggedIn" class="hidden">
           <div>Logged in as <span id="authUser"></span></div>
           <button id="logoutBtn">Logout</button>
         </div>
       </div>
       <div class="settings-footer">
         <small>Your token is stored locally to persist settings.</small>
       </div>
     </div>
   </div>
 
   <div id="confirmPanel" class="modal-panel hidden" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
     <div class="modal-content">
       <div class="modal-header">
         <h3 id="confirmTitle">Confirm</h3>
         <button id="closeConfirm" title="Close" aria-label="Close">‚úï</button>
       </div>
       <div class="modal-body">
         <p id="confirmMessage">Are you sure?</p>
       </div>
       <div class="modal-footer">
         <button id="confirmCancel">Cancel</button>
         <button id="confirmOk" class="danger">Delete</button>
       </div>
     </div>
   </div>
 
   <div id="promptPanel" class="modal-panel hidden" role="dialog" aria-modal="true" aria-labelledby="promptTitle">
     <div class="modal-content">
       <div class="modal-header">
         <h3 id="promptTitle">Input</h3>
         <button id="closePrompt" title="Close" aria-label="Close">‚úï</button>
       </div>
       <div class="modal-body">
         <label id="promptLabel" for="promptInput">Value</label>
         <input id="promptInput" />
         <textarea id="promptTextarea" class="hidden" rows="4"></textarea>
       </div>
       <div class="modal-footer">
         <button id="promptCancel">Cancel</button>
         <button id="promptOk">OK</button>
       </div>
     </div>
   </div>
 
   <script src="/ui/main.js"></script>
 </body>
 </html>

